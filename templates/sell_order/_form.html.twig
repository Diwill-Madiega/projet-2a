{{ form_start(form) }}
    <div class="form-group">
        {{ form_label(form.name, "Nom", {'label_attr': {'class': 'form-label'}}) }}
        {{ form_widget(form.name, {'attr': {'class': 'form-control'}}) }}
    </div>
    <div class="form-group">
        {{ form_label(form.date, "Date", {'label_attr': {'class': 'form-label'}}) }}
        {{ form_widget(form.date, {'attr': {'class': 'form-control'}}) }}
    </div>
    <div class="form-group">
        {{ form_label(form.detail, "DÃ©tail", {'label_attr': {'class': 'form-label'}}) }}
        {{ form_widget(form.detail, {'attr': {'class': 'form-control'}}) }}
    </div>
    <div class="form-group">
        {{ form_label(form.customer, "Client", {'label_attr': {'class': 'form-label'}}) }}
        {{ form_widget(form.customer, {'attr': {'class': 'form-control', }}) }}
    </div>
    <div class="form-group" id="devis-lines-container">
        <label>Devis Lines</label>
    </div>
    <button class="btn btn-primary mt-3"> <i class="fas fa-save"></i>{{ button_label|default(' Enregistrer') }}</button>
{{ form_end(form) }}

<script>
fetch('/sell/order/fetch-devis-lines')
    .then(response => response.json())
    .then(data => {
        const devisLinesContainer = document.getElementById('devis-lines-container');
        devisLinesContainer.innerHTML = '';

        data.forEach(devisLine => {
            const div = document.createElement('div');
            div.innerHTML = `
                <input type="checkbox" id="devisLine-${devisLine.id}" name="sell_order[devisLines][]" value="${devisLine.id}">
                <label for="devisLine-${devisLine.id}">${devisLine.name}</label>
                <!-- Add other fields if needed -->
            `;
            devisLinesContainer.appendChild(div);
        });
    })
    .catch(error => {
        console.error('Error fetching devis lines:', error);
    });
</script>
